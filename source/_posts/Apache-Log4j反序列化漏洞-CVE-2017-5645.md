---
title: Apache Log4j反序列化漏洞(CVE-2017-5645)
date: 2017-04-19 19:13:34
comments: true
tags: 
- Apache漏洞
- 反序列化漏洞
categories: web安全
permalink: 02
password:
copyright: true
---
<blockquote class="blockquote-center">生生的两端，我们彼此站成了岸</blockquote>
　　4月18日，Apache Log4j 被曝出存在一个反序列化漏洞(CVE-2017-5645)，攻击者可以通过发送一个特别制作的2进制payload，在组件将字节反序列化为对象时，触发并执行构造的payload代码。
<!--more-->

### 漏洞触发点
　　该漏洞主要是由于在处理ObjectInputStream时，接收器对于不可靠来源的input没有过滤。可以通过给TcpSocketServer和UdpSocketServer添加可配置的过滤功能以及一些相关设置，可以有效的解决该漏洞。目前Log4j官方已经发布新版本修复了该漏洞，补丁参考下载地址：http://download.nextag.com/apache/logging/log4j/2.8.2/

### 影响范围
#### 受影响的版本
所有Apache Log4j 2.*系列版本： Apache Log4j 2.0-alpha1 – Apache Log4j 2.8.1
#### 不受影响的版本
Apache Log4j 2.8.2

### Poc
暂无

### 建议方案
使用Java 7+的用户应立即升级至2.8.2版本或者避免使用socket server的相关类。
参考链接：
https://issues.apache.org/jira/browse/LOG4J2/fixforversion/12339750/?spm=5176.bbsr313258.0.0.sd9F87&selectedTab=com.atlassian.jira.jira-projects-plugin:version-summary-panel
使用Java 6的用户应该避免使用TCP或者UDP 的socket server相关类，用户也可以手动添加2.8.2版本更新的相关代码来解决该漏洞。
参考链接：https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=5dcc192

文章参考：http://toutiao.secjia.com/apache-log4j-deserialization-vulnerabilities-cve-2017-5645




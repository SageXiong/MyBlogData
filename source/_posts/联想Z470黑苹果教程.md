---
title: 联想Z470黑化之路
date: 2017-02-13 09:32:50
tags: 
- 黑苹果
categories: 折腾不止
password:
copyright: true
---
　　11年入手了一台联想Z470，到现在也有些年头了，当年是看中了它的外观，现在想来性能是它的短板。然而为了工作需要，我便又购置了一台高性能电脑。现如今便想着怎么处理这台小Z，有人建议当废品出售，但无论如何它都跟了我这么多年，舍弃有些不忍。抱着勤俭持家的态度，我便狠了狠心决定多花点钱，将它全面更新升级。在上网找了些资料后，便开始整理思路，汇总如下：
* 更新内容：将原有部分硬件换新（声卡、网卡、外壳、键盘等）
* 升级内容：内存加到8G，添加固态硬盘
* 系统更换：黑化之苹果系统

　　这其中最繁琐的要数装黑苹果系统，技术含量比较高，前2个比较好实现（只要花钱）。有了目标，便开始淘宝购买物件吧，前后大概花了800多，终于凑齐了所有所需之物，好了，那么便开始吧！

### 更换升级零件
　　对于物件更换，这里不多介绍，只要会拆机就行，拆机之前多上网查查机型，根据教程来，不要盲目拆机。
　　加内存条也比较简单，也是先查询机型兼容的内存条型号，购买相应的装入即可。
　　至于安装SSD（固态硬盘），我的做法是将光驱拆下，将原有的机械硬盘放到光驱（需要购买托盘），再将SSD装入原先机械硬盘处即可。
　　以上一切做完之后，小Z已经从硬件上进行了全面大升级（显卡跟CPU不建议更改，可能会使主板损坏，其提升效果不明显）。接下来就是本文重点，更换苹果系统。

### 安装黑苹果

#### 准备阶段
* 第一：上网查资料，上网查资料，上网查资料。。。。。重要的事情多说几遍，要学会自己查找答案。
* 第二：查找对应机型的电脑是否有安装黑苹果成功的案例，如果没有，那么我觉得是时候放弃了（除非是专门研究黑苹果的技术男，不然不要轻易去试）。我算运气比较好的，上网查了一圈，发现有不少小Z安装黑苹果成功的案例。
* 第三：根据网上成功的教程，下载好所需的软件，复制网上成功的路线。
	所需软件：
	* 变色龙引导程序
	* 懒人版镜像
	* 硬盘助手
	* HFS
	* DiskGenius Pro 4.30
	* ......

准备工作都弄好了，那么可以开始动手干了！

##### 安装变色龙引导程序
![](/upload_image/20170213/1.png)
以管理员身份打开：
![](/upload_image/20170213/2.png)
　　如果点击安装，没有反应，则需要打开电脑磁盘管理（右击计算机，管理），给那个100M的隐藏磁盘分配盘符（注意不能分配A盘符，其余的盘符都可以分配），分配完后，重新打开变色龙安装程序，重新安装。安装完成后，会在C盘或者100M的系统隐藏盘生成3个隐藏文件。
![](/upload_image/20170213/3.png)
这3个文件是变色龙的引导文件。

##### 安装HFS
![](/upload_image/20170213/4.png)
直接双击运行，一路安装，具体作用自行百度吧。

##### 给电脑分区
首先分配一个8G大小的区，注意不要格式化。（用来放OSX安装程序，相当于硬盘安装盘）
然后再分配个大小不上限的区，注意不要格式化。（用来安装OSX，相当于windows的C盘）
##### 打开硬盘助手
![](/upload_image/20170213/5.png)
将下载好的系统盘（我用的是懒人版，7.5G大小），写入刚分配好的8G大小的磁盘中，需要等到几分钟。。。

##### DiskGenius Pro 4.30（查看磁盘状态工具）
![](/upload_image/20170213/6.png)
将刚才分的2个磁盘（8G，不上限大小），标识都设置为AF。右击更改参数，直接改为AF。

##### 将EFI文件放入安装盘根目录
![](/upload_image/20170213/7.png)
即放在那个8G大小的盘根目录。
注意：如果打开资源管理器，看不到8G的那个磁盘，可以重启电脑再看看。实在没有，估计是磁盘分区有问题，可能就需要重装系统了。

##### EDID注入
EFI下面有一个config.split文件，需要替换成自己电脑的edid（替换方法自行百度），这个文件是clover引导的配置文件，至关重要。

##### 将Clover.iso替换wowpc.iso
将clover.iso重命名为wowpc.iso，然后替换C盘或者隐藏盘下的wowpc.iso。这样变色龙引导会直接跳转到clover引导。

#### 安装阶段
　　安装的过程中，最主要的是看会不会卡logo，或者黑屏。如果出现这2种情况，绝大部分原因是config.split配置文件的问题。如果一切正常，那么会成功进入安装界面，在选择安装到哪个盘时，要先选择菜单栏上的磁盘工具找到那个分配的准备拿来存放OSX系统的磁盘，选择抹掉，格式为OS（日志格式），再回到安装界面，就会发现可以选择那个磁盘进行安装了。

#### 驱动配置
　　等到安装完成，就差不多可以用了，但是无线网卡驱动跟声音驱动还没有弄好。
　　安装无线网卡驱动：改无线网卡2a为2b，方法为finder进10.11系统盘system/library/extensions/,找到IO82011Family.kext，右键显示包内容找到/contents/Pluglus/AirportAtheros40.kext，继续右键显示包内容，找到contents/Info.pilst，用plistEdit Pro（自行百度安装该软件）打开，找到：
```bash
                        <array>
                                <string>pci168c,30</string>
                                <string>pci168c,2a</string>
                                <string>pci106b,0086</string>
                                <string>pci168c,1c</string>
                                <string>pci168c,23</string>
                                <string>pci168c,24</string>
                        </array>
```
代码，将第三行里面的2a改为2b，保存退出，之后用KCPM Utility Pro.app修复重建缓存
，重启。重启之后无线网卡应该能成功驱动了。
　　安装声卡驱动：即AppleHDA.kext驱动，删除system/library/extensions/AppleHDA.kext后，用KCPM Utility Pro进行安装，路径也为system/library/extensions/，安装完成之后重建缓存即可。

#### 截图见证
![](/upload_image/20170213/8.png)
![](/upload_image/20170213/9.png)

*提醒：以上过程只适用于联想Z470，其他机型请上网查资料......*


参考：[远景论坛](http://bbs.pcbeta.com/viewthread-1662315-1-1.html)